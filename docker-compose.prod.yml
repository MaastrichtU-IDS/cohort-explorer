version: "3.3"
# Docker compose file for production
services:

  backend:
    extends:
      file: docker-compose.base.yml
      service: backend
    environment:
      FRONTEND_URL: https://explorer.icare4cvd.eu
      VIRTUAL_HOST: api.explorer.icare4cvd.eu
      LETSENCRYPT_HOST: api.explorer.icare4cvd.eu
      VIRTUAL_PORT: 80
    # volumes:
    #   - ./data:/data

  frontend:
    extends:
      file: docker-compose.base.yml
      service: frontend
    build:
      args:
        - NEXT_PUBLIC_API_URL=https://api.explorer.icare4cvd.eu
    environment:
      VIRTUAL_HOST: explorer.icare4cvd.eu
      LETSENCRYPT_HOST: explorer.icare4cvd.eu
      VIRTUAL_PORT: 3000

  db:
    extends:
      file: docker-compose.base.yml
      service: db